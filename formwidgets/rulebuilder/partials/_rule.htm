<li
    id="<?= 'rule'.$rule->id ?>"
    data-rule-id="<?= $rule->id ?>"
    class="rule-item <?= $rule->hasFieldConfig() ? '' : 'no-form' ?>">
    <div>
        <div class="icons">
            <span class="icon"><i class="<?= e($rule->getSubFormIcon()) ?>"style="<?php if($rule->isFnc()) : ?>color:orange<?php endif ?>"></i></span>
        </div>
        <a href="javascript:;" data-rules-settings>
            <div class="bloc-title">
                <div class="child code">
                        <span>
                            <?= e($this->getCacheRuleTitle($rule)) ?>
                            
                            <span class="subcode">
                                <br>
                                <?php if($share = $this->getCacheShareMode($rule)) : ?>
                                    | <i class="icon-share-alt"></i> <?=$share?> (<?= $this->countShareModel($rule) ?>)
                                <?php else:
                                $title = $this->getCacheRuleCode($rule) ?>
                                <i class="icon-code" title="<?= $title ?>"></i> : <?= $title?>
                                <?php endif ?>
                            </span>
                        </span>
                        
                        <?php if($memo = $this->getCacheMemo($rule)) : ?>
                                <div class="memo"><i class=" icon-question-circle-o"></i> <?=$memo?></div>
                        <?php endif ?>
                </div>
                <div class="child tools">
                    <?php if($partialComment = $this->getPartialComment($rule)) : ?>
                        <?= $partialComment ?>
                    <?php else: ?>
                        <?= $this->getCacheRuleText($rule) ?>
                    <?php endif ?>
                </div>
            </div> 
        </a>
        <?php if(!$isRestrictedMode) : ?>
        <ul class="submenu">
            <?php if($partialBtn = $this->getPartialBtn($rule)) : ?>
                <?= $partialBtn ?>
            <?php endif ?>
            <li>
                <div>
                    <a href="javascript:;" data-rules-delete>
                        <i class="icon-trash-o control-icon"></i>
                    </a>
                </div>
            </li>
            <li>
                <div class="group">
                    <a  class="btn_up" href="javascript:;" data-rules-reorderup>
                        <i class="icon-chevron-up control-icon"></i>
                    </a>
                    <a href="javascript:;" data-rules-reorderdown>
                        <i class="icon-chevron-down control-icon"></i>
                    </a>
                </div>
            </li>
        </ul>
        <?php endif ?>
    </div>

    <input
           type="hidden"
           name="<?=$this->getId()?>rule_data[<?= $rule->id ?>]"
           value="<?= e(json_encode($this->getCacheRuleData($rule))) ?>" />
</li>
